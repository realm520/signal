# Signal - Cryptocurrency Market Monitoring Configuration
# Copy this file to config.yaml and customize for your needs

# Exchanges to monitor
exchanges:
  # Binance
  - name: binance
    markets:
      - BTC/USDT
      - ETH/USDT
    enabled: true

  # OKX (disabled by default)
  - name: okx
    markets:
      - BTC/USDT
      - ETH/USDT
    enabled: false

  # Bybit (disabled by default)
  - name: bybit
    markets:
      - BTC/USDT
    enabled: false

# Technical indicator settings
indicators:
  ma_period: 30           # Moving average period (number of 15m bars)
  ma_type: SMA            # MA type: SMA (Simple) or EMA (Exponential)
  volume_threshold: 3.0   # Volume surge threshold (e.g., 3.0 = 3x average)
  lookback_bars: 4        # Number of bars for new high/low detection (4 = 1 hour)

  # 启动时加载的历史K线数量
  # 100 = 加载最近100根15分钟K线（约25小时数据）
  # 建议范围: 50 - 200（至少要大于 ma_period）
  historical_bars: 100

  # 价格突破幅度要求（百分比）
  # 0.5 = 要求价格突破0.5%以上才告警（默认值）
  # 1.0 = 要求价格突破1%以上
  # 2.0 = 要求价格突破2%以上
  # 建议范围: 0.1 - 5.0
  breakout_threshold_pct: 0.5

# Alert settings
alerts:
  # Lark webhook URL
  # Option 1: Direct URL (less secure)
  lark_webhook: "https://open.larksuite.com/open-apis/bot/v2/hook/YOUR_WEBHOOK_ID"

  # Option 2: Environment variable (recommended)
  # lark_webhook: "${LARK_WEBHOOK_URL}"
  # Then set: export LARK_WEBHOOK_URL="https://open.larksuite.com/..."

  # @ 用户设置（可选，三种方式）
  #
  # 方式 1: 使用飞书 user_id（推荐，有通知）
  # mention_user_id: "9bc2ae52"  # 格式: <at user_id="9bc2ae52"></at>，用户会收到通知
  #
  # 方式 2: 使用飞书 open_id（有通知）
  # mention_user_id: "ou_xxxxxx"  # 格式: <at user_id="ou_xxxxx"></at>，用户会收到通知
  #
  # 方式 3: 纯文本显示（无通知）
  # mention_user_id: "ZhangHarry"  # 格式: @ZhangHarry（纯文本，不会有通知）
  #
  # 使用环境变量:
  # mention_user_id: "${LARK_MENTION_USER_ID}"

  cooldown_seconds: 300   # Cooldown period after alert (5 minutes)
  rate_limit: 10          # Maximum alerts per minute

# Logging configuration
logging:
  level: INFO             # Logging level: DEBUG, INFO, WARNING, ERROR
  to_file: true           # Whether to log to file (set to false for PM2/Docker)
  file: logs/signal.log   # Log file path (only used when to_file is true)
